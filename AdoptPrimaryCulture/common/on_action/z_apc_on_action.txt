#-----------------------------------------------------------------------------------------
# Vanilla on_actions
#-----------------------------------------------------------------------------------------
on_game_initialized = {
	on_actions = {
		z_apc_update_cultural_majority									# Update Cultural Majority
	}
}

yearly_country_pulse = {
	on_actions = {
		z_apc_update_cultural_majority									# Update Cultural Majority
	}
}

monthly_country_pulse = {
	on_actions = {
		delay = { days = 27 }
		z_apc_new_primary_culture_cleanup_1								# Force noble cultures count recalculation by temporarily converting all pops from the old primary culture, a few days before monthly tick
	}
}

monthly_country_pulse = {
	on_actions = {
		z_apc_new_primary_culture_cleanup_2								# Restore all these pops to the old primary culture
	}
}

#-----------------------------------------------------------------------------------------
# Update Cultural Majority
#-----------------------------------------------------------------------------------------
z_apc_update_cultural_majority = {
	effect = {
		if = {
			limit = {
				NOR = {
					tag = BAR
					tag = PIR
					tag = REB
					tag = MER
				}
			}
			z_apc_find_cultural_majority_effect = yes					# Find a Cultural Majority, then update Cultural Majority or remove invalid Cultural Majority
		}
	}
}

#-----------------------------------------------------------------------------------------
# Force noble cultures count recalculation by temporarily converting all pops from the old primary culture, a few days before monthly tick
#-----------------------------------------------------------------------------------------
z_apc_new_primary_culture_cleanup_1 = {
	effect = {
		if = {
			limit = { has_variable = z_apc_country_needs_new_primary_culture_cleanup_1 }
			z_apc_new_primary_culture_cleanup_1_effect = yes
		}
	}
}

#-----------------------------------------------------------------------------------------
# Restore all these pops to the old primary culture
#-----------------------------------------------------------------------------------------
z_apc_new_primary_culture_cleanup_2 = {
	effect = {
		if = {
			limit = { has_variable = z_apc_country_needs_new_primary_culture_cleanup_2 }
			z_apc_new_primary_culture_cleanup_2_effect = yes
		}
	}
}

#-----------------------------------------------------------------------------------------
# Mission pulses
#-----------------------------------------------------------------------------------------
z_apc_mission_the_npc_question_monthly_pulse = {
	random_events = {
		#10 = me_roman_1_roman_italia.2
		#10 = me_roman_1_roman_italia.3
		#15 = me_roman_1_roman_italia.4
		#10 = me_roman_1_roman_italia.5
		#10 = me_roman_1_roman_italia.6
		#15 = me_roman_1_roman_italia.7
		#15 = me_roman_1_roman_italia.8
		#10 = me_roman_1_roman_italia.9
		#2 = me_roman_1_roman_italia.11
	}
}