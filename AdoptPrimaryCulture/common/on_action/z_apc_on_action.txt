#-----------------------------------------------------------------------------------------
# Vanilla on_actions
#-----------------------------------------------------------------------------------------
on_game_initialized = {
	on_actions = {
		z_apc_demote_integrated_cultures								# Demote the Diadochi's integrated cultures at game start
		z_apc_update_cultural_majority									# Update Cultural Majority
	}
}

yearly_country_pulse = {
	on_actions = {
		z_apc_update_cultural_majority									# Update Cultural Majority
	}
}

#-----------------------------------------------------------------------------------------
# Demote the Diadochi's integrated cultures at game start (more historical as military integration would happen later)
#-----------------------------------------------------------------------------------------
z_apc_demote_integrated_cultures = {
	effect = {
		if = {
			limit = { primary_culture = macedonian }
			every_country_culture = {
				limit = {
					is_integrated = yes
					NOT = { this = root.country_culture }
				}
				# Demote culture
				set_country_culture_right = freemen
				# Remove demotion modifier
				if = {
					limit = { has_country_culture_modifier = integration_status_removed }
					remove_country_culture_modifier = integration_status_removed
				}
				# Make up for it
				if = {
					limit = {
						NOT = { has_country_culture_modifier = inheritance_right }
					}
					add_country_culture_modifier = {
						name = inheritance_right
						duration = -1
					}
				}
				# Remove rights_increased modifier
				if = {
					limit = { has_country_culture_modifier = rights_increased }
					remove_country_culture_modifier = rights_increased
				}
			}
		}
	}
}

#-----------------------------------------------------------------------------------------
# Update Cultural Majority
#-----------------------------------------------------------------------------------------
z_apc_update_cultural_majority = {
	effect = {
		if = {
			limit = {
				NOR = {
					tag = BAR
					tag = PIR
					tag = REB
					tag = MER
				}
				war = no
				has_civil_war = no
			}
			z_apc_find_cultural_majority_effect = yes					# Find a Cultural Majority, then update Cultural Majority status or remove invalid Cultural Majority status
		}
	}
}

#-----------------------------------------------------------------------------------------
# Mission pulses
#-----------------------------------------------------------------------------------------
z_apc_mission_the_npc_question_monthly_pulse = {
	random_events = {
		10 = z_apc_mission.3
		10 = z_apc_mission.4
		10 = z_apc_mission.5
		10 = z_apc_mission.6
		10 = z_apc_mission.7
		10 = z_apc_mission.8
	}
}