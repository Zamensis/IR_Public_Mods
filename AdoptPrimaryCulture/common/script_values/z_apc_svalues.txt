#-----------------------------------------------------------------------------------------
# Number of pops of the currently evaluated non-primary culture
#-----------------------------------------------------------------------------------------
z_apc_culture_A_country_population = {
	value = 0
	every_owned_province = {
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_A
				}
				add = 1
			}
		}
	}
}

z_apc_culture_A_capital_region_population = {
	value = 0
	every_owned_province = {
		limit = {
			this.region = root.capital_scope.region
		}
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_A
				}
				add = 1
			}
		}
	}
}

z_apc_culture_A_capital_area_population = {
	value = 0
	every_owned_province = {
		limit = {
			this.area = root.capital_scope.area
		}
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_A
				}
				add = 1
			}
		}
	}
}

z_apc_culture_A_capital_city_population = {
	value = 0
	root.capital_scope = {
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_A
				}
				add = 1
			}
		}
	}
}

z_apc_culture_B_country_population = {
	value = 0
	every_owned_province = {
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_B
				}
				add = 1
			}
		}
	}
}

z_apc_culture_B_capital_region_population = {
	value = 0
	every_owned_province = {
		limit = {
			this.region = root.capital_scope.region
		}
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_B
				}
				add = 1
			}
		}
	}
}

z_apc_culture_B_capital_area_population = {
	value = 0
	every_owned_province = {
		limit = {
			this.area = root.capital_scope.area
		}
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_B
				}
				add = 1
			}
		}
	}
}

z_apc_culture_B_capital_city_population = {
	value = 0
	root.capital_scope = {
		every_pops_in_province = {
			if = {
				limit = {
					this.country_culture = scope:z_apc_culture_B
				}
				add = 1
			}
		}
	}
}

#-----------------------------------------------------------------------------------------
# Percentages of pops from the currently evaluated non-primary culture, per level
#-----------------------------------------------------------------------------------------
z_apc_culture_pc_country = {
	value = var:z_apc_culture_A_country_population_cache
	divide = root.country_population
}

z_apc_culture_pc_capital_region = {
	value = var:z_apc_culture_A_capital_region_population_cache
	divide = {
		value = 0
		root.capital_scope.region = {
			every_region_province = {
				limit = {
					has_owner = yes
					owner = root
				}
				add = total_population
			}
		}
	}
}

z_apc_culture_pc_capital_area = {
	value = var:z_apc_culture_A_capital_area_population_cache
	divide = {
		value = 0
		root.capital_scope.area = {
			every_area_province = {
				limit = {
					has_owner = yes
					owner = root
				}
				add = total_population
			}
		}
	}
}

z_apc_culture_pc_capital_city = {
	value = var:z_apc_culture_A_capital_city_population_cache
	divide = root.capital_scope.total_population
}

#-----------------------------------------------------------------------------------------
# Percentage thresholds for the currently evaluated non-primary culture to be considered a Cultural Majority, per level
#-----------------------------------------------------------------------------------------
z_apc_cultural_majority_threshold_country = { value = 0 }
z_apc_cultural_majority_threshold_capital_region = { value = 0 }
z_apc_cultural_majority_threshold_capital_area = { value = 0 }
z_apc_cultural_majority_threshold_capital_city = { value = 0 }

#-----------------------------------------------------------------------------------------
# Svalues that return vars, since comparing two vars returns illegal operator error
#-----------------------------------------------------------------------------------------
z_apc_culture_A_country_population_cache = { value = var:z_apc_culture_A_country_population_cache }
z_apc_culture_A_capital_region_population_cache = { value = var:z_apc_culture_A_capital_region_population_cache }
z_apc_culture_A_capital_area_population_cache = { value = var:z_apc_culture_A_capital_area_population_cache }
z_apc_culture_A_capital_city_population_cache = { value = var:z_apc_culture_A_capital_city_population_cache }
z_apc_culture_B_country_population_cache = { value = var:z_apc_culture_B_country_population_cache }
z_apc_culture_B_capital_region_population_cache = { value = var:z_apc_culture_B_capital_region_population_cache }
z_apc_culture_B_capital_area_population_cache = { value = var:z_apc_culture_B_capital_area_population_cache }
z_apc_culture_B_capital_city_population_cache = { value = var:z_apc_culture_B_capital_city_population_cache }